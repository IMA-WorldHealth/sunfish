extends ../layout.pug

block content
  .container
    .columns
      .column.col-12
        table.table.table-striped
          thead
            tr
              th #{t('SCHEDULES.SUBJECT')}
              th #{t('SCHEDULES.FREQUENCY')}
              th #{t('SCHEDULES.LAST_RUN')}
              th #{t('SCHEDULES.NEXT_RUN')}
              th #{t('SCHEDULES.DASHBOARDS')}
              th #{t('SCHEDULES.GROUP')}
              th #{t('SCHEDULES.CREATED')}
              th #{t('SCHEDULES.ACTIONS')}
          tbody
            each row in schedules
              tr
                td #{row.subject}
                td #{row.frequency}
                td(title=row.lastRunTime)
                  if row.lastRunTime
                    i #{row.lastRunTimeLabel}
                  else
                    i ---
                td(title=row.nextRunTime)
                  i #{row.nextRunTimeLabel}
                td(title=row.fmtDashboards) #{row.fmtDashboards}
                td(title=row.userGroup.id) #{row.userGroup.displayName}
                td(title=row.created) #{row.createdLabel}
                td
                  .dropdown.dropdown-right
                    a(href="#", tabindex="0").btn.btn-link.dropdown-toggle #{t('SCHEDULES.ACTIONS')}
                      i.icon.icon-caret

                    ul.menu

                      li.menu-item
                        - const detailUrl = `/schedules/${row.id}/details`;
                        a(href=detailUrl).text-primary #{t('ACTIONS.VIEW')}

                      li.menu-item
                        - const triggerUrl = `/schedules/${row.id}/trigger`;
                        a(href=triggerUrl).text-success #{t('ACTIONS.TRIGGER')}

                      li.menu-item
                        - const deleteUrl = `/schedules/${row.id}/delete`;
                        a(href=deleteUrl).text-error #{t('ACTIONS.DELETE')}

        unless schedules.length
          .empty
            .empty-icon
              i.icon.icon-3x.icon-bookmark
            p.empty-title.h4 #{t('SCHEDULES.EMPTY_TITLE')}
            p.empty-subtitle #{t('SCHEDULES.EMPTY_SUBTITLE')}

        br
        a(href="schedules/create", data-add-loading).btn.btn-primary #{t('SCHEDULES.ADD')}
